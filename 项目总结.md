# 音效文件名批量翻译工具

## 更新日志
### 2024-03-22
- 重构了音效分类功能，将功能拆分为三个独立的类：
  - `CategoryCache`: 专门处理缓存逻辑
  - `FilenameProcessor`: 专门处理文件名处理
  - `CategoryMatcher`: 专门处理分类匹配
- 优化了分类匹配算法，提高了匹配准确性
- 简化了代码结构，移除了不必要的异步操作
- 完善了单元测试，提高了代码质量

## 项目概述
这是一个用于批量翻译音效文件名的Python程序。它利用AI服务商提供的大模型进行翻译，同时提供音效分类和批量编辑等功能。新需求包括优化音效分类匹配、移除不必要的功能模块（如词典管理）以及新增Prompt调试模块，以便更方便地进行Prompt生成和调试。

## 主要功能
1. **音效分类**：
   - 使用改进的分类匹配算法，支持精确匹配和模糊匹配
   - 统一使用 _categorylist.csv 作为分类数据源
   - 实现高效的缓存机制，提高性能
   - 支持中英文混合匹配和同义词匹配

2. **AI翻译与Prompt调试**：
   - 调用AI服务商的API进行翻译
   - 生成符合需求的双语描述
   - 提供独立的Prompt调试工具

3. **批量命名**：
   - 按照标准格式和规则对音效文件进行批量重命名
   - 支持自定义命名规则
   - 智能处理文件名冲突

4. **批量编辑**：
   - 提供简单的批量编辑音效文件名的功能
   - 支持预览修改结果
   - 优化性能以支持大量文件处理

## 命名流程
1. 使用改进的分类匹配算法检索 _categorylist.csv 数据，匹配对应的CatID
2. 提取文件名，并将其交由AI处理，生成符合音效文件命名需求的双语描述
3. 从生成的双语描述中提取Fxname和中文描述
4. 按照用户自定义的命名规则，重新组合生成的文件名

## 配置管理
- 所有配置信息集中在 `config.py` 中管理
- 提供图形界面允许用户在运行中修改配置，并确保配置即时生效

## 代码结构
- `config.py`：配置文件，集中管理各项配置信息
- `translator.py`：实现翻译功能的主要逻辑
- `category_manager.py`：负责音效文件分类功能，包含三个核心类：
  - `CategoryCache`：处理缓存逻辑
  - `FilenameProcessor`：处理文件名
  - `CategoryMatcher`：处理分类匹配
- `translator_gui.py`：提供图形用户界面
- `service_manager.py`：管理各个AI服务的调用
- 已移除：`dictionary_manager.py` 模块

## 改进优化建议
1. **音效分类**：
   - [已完成] 重构分类功能，拆分为独立的类
   - [已完成] 优化分类匹配算法
   - [已完成] 改进缓存机制
   - [待完成] 进一步优化性能和准确性

2. **Prompt调试**：
   - [待完成] 实现独立的Prompt调试模块
   - [待完成] 添加实时测试功能
   - [待完成] 集成到GUI中

3. **命名规则**：
   - [待完成] 实现命名规则模块
   - [待完成] 支持自定义规则
   - [待完成] 建立规则和AI生成内容的联动

4. **代码优化**：
   - [已完成] 重构代码结构
   - [已完成] 完善单元测试
   - [已完成] 优化异步操作
   - [待完成] 进一步完善文档和注释

## 待改进功能
1. 继续优化音效分类算法，提高匹配性能与准确性
2. 实现并集成Prompt调试模块到GUI中
3. 开发命名规则模块，支持用户自定义规则
4. 优化批量编辑功能，提高处理效率 